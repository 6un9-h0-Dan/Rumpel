version: '3'
services:
  api:
    build: 
      context: .
      dockerfile: Dockerfile
  rumpel:
    environment: 
      - RUMPEL_PORT=8585
    build: ../../src
    command: --record-contract --target-api=http://api:1337 --contract-name=consumer-api
    ports:
      - '8585:8585'
    volumes:
    - ./contracts/:/app/contracts
    depends_on:
      - api

 